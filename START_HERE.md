# ğŸš€ START HERE - ã‚·ã‚¹ãƒ†ãƒ èµ·å‹•ã‚¬ã‚¤ãƒ‰

## âœ… ã‚·ã‚¹ãƒ†ãƒ æ§‹ç¯‰å®Œäº†ï¼

Rails 7 + Django + MySQL ã«ã‚ˆã‚‹è¦‹ç©OCRãƒ»æ¯”è¼ƒãƒ»kintoneé€£æºã‚·ã‚¹ãƒ†ãƒ ãŒå®Œæˆã—ã¾ã—ãŸã€‚

---

## ğŸ“‹ æ¤œè¨¼çµæœ

ã™ã¹ã¦ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒæ­£å¸¸ã«ä½œæˆã•ã‚Œã¦ã„ã¾ã™ï¼š

```bash
./verify_setup.sh
```

çµæœ:
- âœ… Docker Composeè¨­å®š
- âœ… Rails API (MySQLå¯¾å¿œ)
- âœ… Django OCRã‚µãƒ¼ãƒ“ã‚¹
- âœ… MySQLåˆæœŸåŒ–ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
- âœ… kintoneãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å®šç¾©
- âœ… å®Œå…¨ãªãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

---

## ğŸ¯ å³åº§ã«èµ·å‹•ã™ã‚‹ (3ã‚¹ãƒ†ãƒƒãƒ—)

### ã‚¹ãƒ†ãƒƒãƒ— 1: ã‚·ã‚¹ãƒ†ãƒ èµ·å‹•

```bash
docker-compose up --build
```

èµ·å‹•å®Œäº†ã¾ã§ **2-3åˆ†** ã‹ã‹ã‚Šã¾ã™ã€‚

ä»¥ä¸‹ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚Œã°æˆåŠŸ:
```
vibe_rails    | => Booting Puma
vibe_django   | Booting worker with pid: X
vibe_mysql    | ready for connections
```

### ã‚¹ãƒ†ãƒƒãƒ— 2: å‹•ä½œç¢ºèª (åˆ¥ã‚¿ãƒ¼ãƒŸãƒŠãƒ«)

```bash
# Railsãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
curl http://localhost:3000/health

# Djangoãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
curl http://localhost:8000/api/health/
```

### ã‚¹ãƒ†ãƒƒãƒ— 3: ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

```bash
# PDFã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒ†ã‚¹ãƒˆ
curl -X POST http://localhost:3000/estimates/upload \
  -F "pdf=@dummy.pdf"

# è¦‹ç©ä¸€è¦§å–å¾—
curl http://localhost:3000/estimates
```

---

## ğŸ“š ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä¸€è¦§

| ãƒ•ã‚¡ã‚¤ãƒ« | å†…å®¹ | ç”¨é€” |
|---------|------|------|
| **QUICKSTART.md** | ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ | æœ€é€Ÿã§èµ·å‹•ã—ãŸã„æ™‚ |
| **README.md** | å®Œå…¨ãƒãƒ‹ãƒ¥ã‚¢ãƒ« | ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã‚’ç†è§£ã—ãŸã„æ™‚ |
| **DEPLOYMENT_COMMANDS.md** | ã‚³ãƒãƒ³ãƒ‰é›† | ã‚³ãƒãƒ³ãƒ‰ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ |
| **SYSTEM_SUMMARY.md** | æ§‹ç¯‰å ±å‘Šæ›¸ | å®Ÿè£…å†…å®¹ã®è©³ç´° |
| **kintone_316_fields.json** | kintoneå®šç¾© | ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãƒãƒƒãƒ”ãƒ³ã‚° |

---

## ğŸ”§ ã‚ªãƒ—ã‚·ãƒ§ãƒ³è¨­å®š

### Google Vision API ã‚’ä½¿ã†å ´åˆ

```bash
# 1. google-key.json ã‚’é…ç½®
cp /path/to/your/google-key.json ./google-key.json

# 2. å†èµ·å‹•
docker-compose restart django
```

**æ³¨æ„:** google-key.jsonãŒç„¡ãã¦ã‚‚å‹•ä½œã—ã¾ã™ï¼ˆãƒ€ãƒŸãƒ¼ãƒ‡ãƒ¼ã‚¿ä½¿ç”¨ï¼‰

### kintoneé€£æºã‚’ä½¿ã†å ´åˆ

```bash
# 1. .env.docker ã‚’ç·¨é›†
vi .env.docker

# ä»¥ä¸‹ã‚’è¨­å®š:
# KINTONE_DOMAIN=your-domain.cybozu.com
# KINTONE_API_TOKEN=your-api-token

# 2. å†èµ·å‹•
docker-compose restart rails
```

---

## ğŸ¨ ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆå›³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Rails 7   â”‚â”€â”€â”€â”€â”€â–¶â”‚   Django 5   â”‚â”€â”€â”€â”€â–¶â”‚   Vision   â”‚
â”‚ (port 3000) â”‚      â”‚ (port 8000)  â”‚     â”‚     API    â”‚
â”‚             â”‚      â”‚              â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ ãƒ»è¦‹ç©ç®¡ç†   â”‚      â”‚ ãƒ»PDFè§£æ    â”‚
â”‚ ãƒ»æœ€å®‰æ¯”è¼ƒ   â”‚      â”‚ ãƒ»å“åæ­£è¦åŒ–  â”‚
â”‚ ãƒ»kintone   â”‚      â”‚ ãƒ»å±¥æ­´ä¿å­˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                    â”‚
       â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
       â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚    MySQL 8.0        â”‚
       â”‚                     â”‚
       â”‚ ãƒ»vibe_rails        â”‚
       â”‚ ãƒ»vibe_django       â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”¥ ã‚ˆãä½¿ã†ã‚³ãƒãƒ³ãƒ‰

```bash
# ã‚·ã‚¹ãƒ†ãƒ èµ·å‹•
docker-compose up --build

# ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰èµ·å‹•
docker-compose up -d

# ãƒ­ã‚°ç¢ºèª
docker-compose logs -f rails
docker-compose logs -f django

# ã‚·ã‚¹ãƒ†ãƒ åœæ­¢
docker-compose down

# å®Œå…¨ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
docker-compose down -v
```

---

## ğŸŒŸ ä¸»è¦ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

### Rails API (port 3000)

```bash
# PDFã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
POST /estimates/upload

# è¦‹ç©ä¸€è¦§
GET /estimates

# æœ€å®‰æ¯”è¼ƒ
GET /recommendations/by_item?item=wiper_blade

# kintoneãƒ—ãƒƒã‚·ãƒ¥ (ã‚µãƒ–ãƒ†ãƒ¼ãƒ–ãƒ«å«ã‚€)
POST /kintone/push?item=wiper_blade
```

### Django API (port 8000)

```bash
# PDFè§£æ
POST /api/parse/

# è§£æå±¥æ­´
GET /api/history/
```

---

## âš¡ å®Ÿè£…æ¸ˆã¿æ©Ÿèƒ½

### âœ… Dockerçµ±åˆç’°å¢ƒ
- MySQL 8.0 (2DBåŒå±…: vibe_rails, vibe_django)
- è‡ªå‹•èµ·å‹•é †åºåˆ¶å¾¡
- ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯

### âœ… Django OCRã‚µãƒ¼ãƒ“ã‚¹
- Google Vision APIé€£æº
- PDFâ†’ãƒ†ã‚­ã‚¹ãƒˆå¤‰æ›
- å“åæ­£è¦åŒ– (wiper_blade, engine_oilç­‰)
- è²»ç›®åˆ¤å®š (parts/labor)
- è§£æå±¥æ­´DBä¿å­˜

### âœ… Rails API
- Djangoé€£æº (DjangoPdfParser)
- MySQLå¯¾å¿œ
- æœ€å®‰æ¯”è¼ƒãƒ­ã‚¸ãƒƒã‚¯
- kintoneé€£æº (ã‚µãƒ–ãƒ†ãƒ¼ãƒ–ãƒ«å¯¾å¿œ)

### âœ… kintoneé€£æº
- app_id 316 å¯¾å¿œ
- ãƒ¡ã‚¤ãƒ³ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ + ã‚µãƒ–ãƒ†ãƒ¼ãƒ–ãƒ«
- è‡ªå‹•ãƒ‡ãƒ¼ã‚¿ãƒãƒƒãƒ”ãƒ³ã‚°

---

## ğŸ› ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ãƒãƒ¼ãƒˆãŒä½¿ç”¨ä¸­ã®å ´åˆ

```bash
# æ—¢å­˜ãƒ—ãƒ­ã‚»ã‚¹ç¢ºèª
lsof -i :3000  # Rails
lsof -i :8000  # Django
lsof -i :3306  # MySQL

# ãƒ—ãƒ­ã‚»ã‚¹åœæ­¢å¾Œã€å†èµ·å‹•
docker-compose up --build
```

### MySQLã«æ¥ç¶šã§ããªã„

```bash
# ãƒ­ã‚°ç¢ºèª
docker-compose logs mysql

# ç›´æ¥æ¥ç¶šãƒ†ã‚¹ãƒˆ
docker-compose exec mysql mysql -uroot -pvibepassword
```

### DjangoãŒèµ·å‹•ã—ãªã„

```bash
# ãƒ­ã‚°ç¢ºèª
docker-compose logs django

# æ‰‹å‹•ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
docker-compose exec django python manage.py migrate
```

---

## ğŸ“ ã‚µãƒãƒ¼ãƒˆ

è©³ç´°ã¯å„ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚ç…§:
- **åŸºæœ¬æ“ä½œ**: QUICKSTART.md
- **å®Œå…¨ãƒãƒ‹ãƒ¥ã‚¢ãƒ«**: README.md
- **ã‚³ãƒãƒ³ãƒ‰ä¸€è¦§**: DEPLOYMENT_COMMANDS.md
- **ã‚·ã‚¹ãƒ†ãƒ è©³ç´°**: SYSTEM_SUMMARY.md

---

## ğŸ‰ ã•ã‚ã€å§‹ã‚ã¾ã—ã‚‡ã†ï¼

```bash
# ã‚·ã‚¹ãƒ†ãƒ èµ·å‹•
docker-compose up --build
```

**èµ·å‹•å®Œäº†ã¾ã§2-3åˆ†å¾…ã¡ã€åˆ¥ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ç¢ºèª:**

```bash
curl http://localhost:3000/health
```

ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãŒè¿”ã£ã¦ãã‚Œã°æˆåŠŸã§ã™ï¼

---

**æ§‹ç¯‰æ—¥**: 2026å¹´1æœˆ19æ—¥
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: âœ… ç¨¼åƒæº–å‚™å®Œäº†
**èµ·å‹•æ–¹æ³•**: `docker-compose up --build`
